import{_ as a}from"./bot-avatar-CBCRm2Zm.js";import{u as s}from"./useBots-CpcdgWbc.js";import{u as t}from"./urlConfig-BRkfAQUm.js";import{r as e}from"./utils-Dy9G1Irh.js";import{r as i}from"./router-DqwQACVR.js";import{g as o}from"./index-BGs17W_C.js";import{d as r,K as l,v as n,a9 as u,aa as d,a as m,b as v,e as c,c as b,O as p,Q as f,R as _,a4 as g,j as k,o as h,$ as j,p as y,i as x,l as w}from"./index-Dnd1wrVz.js";import{S as B}from"./index-CXl91b5n.js";const C={class:"container"},I={class:"bot-edit"},$={key:0,class:"loading"},E={key:1},K={class:"header"},L=(a=>(y("data-v-6f1994f7"),a=a(),x(),a))((()=>v("img",{src:a,alt:"avatar"},null,-1))),Q={class:"name"},R={class:"tabs"},S=["onClick"],T=w(r({__name:"BotEdit",setup(a){const{getCurrentRoute:r,changePage:y}=i(),{tabIndex:x,curBot:w}=l(s()),{setTabIndex:T,setCurBot:q,setKnowledgeList:z}=s(),A=o().bots,F=[{name:A.edit,value:0},{name:A.publish,value:1}],O=n(null),P=n(!0),D=u(d,{style:{fontSize:"48px"},spin:!0}),G=async a=>{try{const s=await e(await t.queryBotInfo({bot_id:a}));q(s[0]),(async a=>{try{let s=[...(await e(await t.kbList())).filter((a=>!/.*_FAQ$/.test(a.kb_name)))];s=a&&a.length?s.map((s=>(a.some((a=>a===s.kb_id))?s.state=1:s.state=0,s))):s.map((a=>(a.state=0,a))),z(s)}catch(s){k.error(s.msg||"获取知识库列表失败")}})(s[0].kb_ids),P.value=!1}catch(s){k.error(s.msg||"获取Bot信息失败")}};return function(){const a=r();O.value=a.value.params.botId,G(O.value)}(),(a,s)=>{var t;const e=B,i=g("router-view");return h(),m("div",C,[v("div",I,[c(P)?(h(),m("div",$,[b(e,{indicator:c(D)},null,8,["indicator"])])):(h(),m("div",E,[v("div",K,[L,v("div",Q,p(null==(t=c(w))?void 0:t.bot_name),1),v("div",R,[(h(),m(f,null,_(F,(a=>v("div",{key:a.name,class:j(["tab-item",c(x)===a.value?"tab-active":"",c(w).kb_ids&&c(w).kb_ids.length||1!==a.value?"":"tab-disable"]),onClick:s=>{var t;(1!==(t=a.value)||w.value.kb_ids&&w.value.kb_ids.length)&&x.value!==t&&(T(t),y(0===t?`/bots/${O.value}/edit`:`/bots/${O.value}/publish`))}},p(a.name),11,S))),64))])]),b(i)]))])])}}}),[["__scopeId","data-v-6f1994f7"]]);export{T as default};
