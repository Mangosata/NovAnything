import{c as e,I as a,d as t,u as r,r as s,a as n,b as o,e as l,w as i,f as c,_ as u,B as d,g as p,h as m,o as f,p as g,i as v,j as h,k as b,n as y,l as w}from"./index-Dnd1wrVz.js";import{u as j}from"./urlConfig-BRkfAQUm.js";import{_ as O,F as x}from"./index-Wcu94PXT.js";import"./index-BOQF8sB2.js";import"./responsiveObserve-DBZcF5T1.js";import"./collapseMotion-SidVLewu.js";import"./class-FJ4HjPo2.js";var _={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};function k(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(a){z(e,a,t[a])}))}return e}function z(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var P=function(t,r){var s=k({},t,r.attrs);return e(a,k({},s,{icon:_}),null)};P.displayName="LockOutlined",P.inheritAttrs=!1;var M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};function V(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(a){I(e,a,t[a])}))}return e}function I(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var H=function(t,r){var s=V({},t,r.attrs);return e(a,V({},s,{icon:M}),null)};H.displayName="MailOutlined",H.inheritAttrs=!1;const S=e=>(g("data-v-7098c4da"),e=e(),v(),e),B={class:"login-container"},E={class:"login-box"},L={class:"login-icon"},U=S((()=>o("h2",null,"登录",-1))),q=S((()=>o("p",{class:"subtitle"},"输入邮箱和密码登录",-1))),A=w(t({__name:"index",setup(a){const t=m(),{setUserInfo:g}=r(),v=s({username:"",password:""}),w=async e=>{try{const a=await j.login({username:e.username,password:e.password});200===a.code?(h.success("登录成功"),b.set("token",a.data.access_token),localStorage.setItem("userId",a.data.user_id),g({userId:a.data.user_id,token:a.data.access_token,role:a.data.role}),await y(),await t.push("/")):h.error(a.msg||"登录失败")}catch(a){h.error("登录失败,请重试")}};return(a,t)=>{const r=c,s=O,m=u,g=d,h=x;return f(),n("div",B,[o("div",E,[o("div",L,[e(l(P))]),U,q,e(h,{model:v,name:"basic","wrapper-col":{span:24},autocomplete:"off",onFinish:w},{default:i((()=>[e(s,{name:"username",rules:[{required:!0,message:"请输入邮箱"}]},{default:i((()=>[e(r,{style:{padding:"10px"},value:v.username,"onUpdate:value":t[0]||(t[0]=e=>v.username=e),placeholder:"Email",size:"large"},{prefix:i((()=>[e(l(H),{style:{"margin-right":"10px","margin-left":"5px"}})])),_:1},8,["value"])])),_:1}),e(s,{name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:i((()=>[e(m,{style:{padding:"10px"},value:v.password,"onUpdate:value":t[1]||(t[1]=e=>v.password=e),placeholder:"Password",size:"large"},{prefix:i((()=>[e(l(P),{style:{"margin-right":"10px","margin-left":"5px"}})])),_:1},8,["value"])])),_:1}),e(s,null,{default:i((()=>[e(g,{type:"primary","html-type":"submit",size:"large",style:{width:"100%",height:"48px"}},{default:i((()=>[p("登录")])),_:1})])),_:1})])),_:1},8,["model"])])])}}}),[["__scopeId","data-v-7098c4da"]]);export{A as default};
