import{c as e,a}from"./ChatInfoPanel-FjtXze9J.js";import{u as t}from"./useChatSetting-BAUL9MYY.js";import{g as n}from"./index-BGs17W_C.js";import{c as l,I as r,d as o,ah as i,v as u,F as s,G as d,H as p,av as c,A as m,aw as v,s as f,x as g,C as h,ag as b,ad as x,ac as y,ax as $,m as S,ay as N,az as w,al as I,aA as _,aB as E,aC as C,aD as k,aE as L,aF as M,aG as T,aH as O,aI as A,aJ as P,t as D,aK as R,aL as B,aM as j,aN as F,aO as z,aP as K,aQ as U,P as q,aR as H,K as W,E as G,aS as V,T as X,a7 as Q,w as J,e as Y,U as Z,b as ee,a as ae,g as te,Q as ne,R as le,f as re,_ as oe,M as ie,B as ue,O as se,j as de,n as pe,o as ce,p as me,i as ve,l as fe,W as ge,X as he}from"./index-Dnd1wrVz.js";import{F as be,_ as xe}from"./index-Wcu94PXT.js";import{i as ye,D as $e,S as Se,a as Ne}from"./index-DI3wlhMT.js";import{_ as we,S as Ie}from"./index-b0BYlB-E.js";import{_ as _e}from"./index-DxXpsklO.js";var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};function Ce(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(a){ke(e,a,t[a])}))}return e}function ke(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var Le=function(e,a){var t=Ce({},e,a.attrs);return l(r,Ce({},t,{icon:Ee}),null)};function Me(){return"function"==typeof BigInt}function Te(e){let a=e.trim(),t=a.startsWith("-");t&&(a=a.slice(1)),a=a.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),a.startsWith(".")&&(a=`0${a}`);const n=a||"0",l=n.split("."),r=l[0]||"0",o=l[1]||"0";"0"===r&&"0"===o&&(t=!1);const i=t?"-":"";return{negative:t,negativeStr:i,trimStr:n,integerStr:r,decimalStr:o,fullStr:`${i}${n}`}}function Oe(e){const a=String(e);return!Number.isNaN(Number(a))&&a.includes("e")}function Ae(e){const a=String(e);if(Oe(e)){let e=Number(a.slice(a.indexOf("e-")+2));const t=a.match(/\.(\d+)/);return(null==t?void 0:t[1])&&(e+=t[1].length),e}return a.includes(".")&&De(a)?a.length-a.indexOf(".")-1:0}function Pe(e){let a=String(e);if(Oe(e)){if(e>Number.MAX_SAFE_INTEGER)return String(Me()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(Me()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);a=e.toFixed(Ae(a))}return Te(a).fullStr}function De(e){return"number"==typeof e?!Number.isNaN(e):!!e&&(/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e))}function Re(e){return!e&&0!==e&&!Number.isNaN(e)||!String(e).trim()}Le.displayName="UpOutlined",Le.inheritAttrs=!1;class Be{constructor(e){this.origin="",Re(e)?this.empty=!0:(this.origin=String(e),this.number=Number(e))}negate(){return new Be(-this.toNumber())}add(e){if(this.isInvalidate())return new Be(e);const a=Number(e);if(Number.isNaN(a))return this;const t=this.number+a;if(t>Number.MAX_SAFE_INTEGER)return new Be(Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return new Be(Number.MIN_SAFE_INTEGER);const n=Math.max(Ae(this.number),Ae(a));return new Be(t.toFixed(n))}isEmpty(){return this.empty}isNaN(){return Number.isNaN(this.number)}isInvalidate(){return this.isEmpty()||this.isNaN()}equals(e){return this.toNumber()===(null==e?void 0:e.toNumber())}lessEquals(e){return this.add(e.negate().toString()).toNumber()<=0}toNumber(){return this.number}toString(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":Pe(this.number):this.origin}}class je{constructor(e){if(this.origin="",Re(e))return void(this.empty=!0);if(this.origin=String(e),"-"===e||Number.isNaN(e))return void(this.nan=!0);let a=e;if(Oe(a)&&(a=Number(a)),a="string"==typeof a?a:Pe(a),De(a)){const e=Te(a);this.negative=e.negative;const t=e.trimStr.split(".");this.integer=BigInt(t[0]);const n=t[1]||"0";this.decimal=BigInt(n),this.decimalLen=n.length}else this.nan=!0}getMark(){return this.negative?"-":""}getIntegerStr(){return this.integer.toString()}getDecimalStr(){return this.decimal.toString().padStart(this.decimalLen,"0")}alignDecimal(e){const a=`${this.getMark()}${this.getIntegerStr()}${this.getDecimalStr().padEnd(e,"0")}`;return BigInt(a)}negate(){const e=new je(this.toString());return e.negative=!e.negative,e}add(e){if(this.isInvalidate())return new je(e);const a=new je(e);if(a.isInvalidate())return this;const t=Math.max(this.getDecimalStr().length,a.getDecimalStr().length),n=(this.alignDecimal(t)+a.alignDecimal(t)).toString(),{negativeStr:l,trimStr:r}=Te(n),o=`${l}${r.padStart(t+1,"0")}`;return new je(`${o.slice(0,-t)}.${o.slice(-t)}`)}isEmpty(){return this.empty}isNaN(){return this.nan}isInvalidate(){return this.isEmpty()||this.isNaN()}equals(e){return this.toString()===(null==e?void 0:e.toString())}lessEquals(e){return this.add(e.negate().toString()).toNumber()<=0}toNumber(){return this.isNaN()?NaN:Number(this.toString())}toString(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":Te(`${this.getMark()}${this.getIntegerStr()}.${this.getDecimalStr()}`).fullStr:this.origin}}function Fe(e){return Me()?new je(e):new Be(e)}function ze(e,a,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===e)return"";const{negativeStr:l,integerStr:r,decimalStr:o}=Te(e),i=`${a}${o}`,u=`${l}${r}`;if(t>=0){const r=Number(o[t]);if(r>=5&&!n){return ze(Fe(e).add(`${l}0.${"0".repeat(t)}${10-r}`).toString(),a,t,n)}return 0===t?u:`${u}${a}${o.padEnd(t,"0").slice(0,t)}`}return".0"===i?u:`${u}${i}`}const Ke=o({compatConfig:{MODE:3},name:"StepHandler",inheritAttrs:!1,props:{prefixCls:String,upDisabled:Boolean,downDisabled:Boolean,onStep:i()},slots:Object,setup(e,a){let{slots:t,emit:n}=a;const r=u(),o=(e,a)=>{e.preventDefault(),n("step",a),r.value=setTimeout((function e(){n("step",a),r.value=setTimeout(e,200)}),600)},i=()=>{clearTimeout(r.value)};return s((()=>{i()})),()=>{if(ye())return null;const{prefixCls:a,upDisabled:n,downDisabled:r}=e,u=`${a}-handler`,s=d(u,`${u}-up`,{[`${u}-up-disabled`]:n}),c=d(u,`${u}-down`,{[`${u}-down-disabled`]:r}),m={unselectable:"on",role:"button",onMouseup:i,onMouseleave:i},{upNode:v,downNode:f}=t;return l("div",{class:`${u}-wrap`},[l("span",p(p({},m),{},{onMousedown:e=>{o(e,!0)},"aria-label":"Increase Value","aria-disabled":n,class:s}),[(null==v?void 0:v())||l("span",{unselectable:"on",class:`${a}-handler-up-inner`},null)]),l("span",p(p({},m),{},{onMousedown:e=>{o(e,!1)},"aria-label":"Decrease Value","aria-disabled":r,class:c}),[(null==f?void 0:f())||l("span",{unselectable:"on",class:`${a}-handler-down-inner`},null)])])}}});const Ue=(e,a)=>e||a.isEmpty()?a.toString():a.toNumber(),qe=e=>{const a=Fe(e);return a.isInvalidate()?null:a},He=()=>({stringMode:b(),defaultValue:x([String,Number]),value:x([String,Number]),prefixCls:y(),min:x([String,Number]),max:x([String,Number]),step:x([String,Number],1),tabindex:Number,controls:b(!0),readonly:b(),disabled:b(),autofocus:b(),keyboard:b(!0),parser:i(),formatter:i(),precision:Number,decimalSeparator:String,onInput:i(),onChange:i(),onPressEnter:i(),onStep:i(),onBlur:i(),onFocus:i()}),We=o({compatConfig:{MODE:3},name:"InnerInputNumber",inheritAttrs:!1,props:f(f({},He()),{lazy:Boolean}),slots:Object,setup(e,a){let{attrs:t,slots:n,emit:r,expose:o}=a;const i=m(),b=m(!1),x=m(!1),y=m(!1),S=m(Fe(e.value));const N=(a,t)=>{if(!t)return e.precision>=0?e.precision:Math.max(Ae(a),Ae(e.step))},w=a=>{const t=String(a);if(e.parser)return e.parser(t);let n=t;return e.decimalSeparator&&(n=n.replace(e.decimalSeparator,".")),n.replace(/[^\w.-]+/g,"")},I=m(""),_=(a,t)=>{if(e.formatter)return e.formatter(a,{userTyping:t,input:String(I.value)});let n="number"==typeof a?Pe(a):a;if(!t){const a=N(n,t);if(De(n)&&(e.decimalSeparator||a>=0)){n=ze(n,e.decimalSeparator||".",a)}}return n},E=(()=>{const a=e.value;return S.value.isInvalidate()&&["string","number"].includes(typeof a)?Number.isNaN(a)?"":a:_(S.value.toString(),!1)})();function C(e,a){I.value=_(e.isInvalidate()?e.toString(!1):e.toString(!a),a)}I.value=E;const k=g((()=>qe(e.max))),L=g((()=>qe(e.min))),M=g((()=>!(!k.value||!S.value||S.value.isInvalidate())&&k.value.lessEquals(S.value))),T=g((()=>!(!L.value||!S.value||S.value.isInvalidate())&&S.value.lessEquals(L.value))),[O,A]=function(e,a){const t=u(null);return[function(){try{const{selectionStart:a,selectionEnd:n,value:l}=e.value,r=l.substring(0,a),o=l.substring(n);t.value={start:a,end:n,value:l,beforeTxt:r,afterTxt:o}}catch(a){}},function(){if(e.value&&t.value&&a.value)try{const{value:a}=e.value,{beforeTxt:n,afterTxt:l,start:r}=t.value;let o=a.length;if(a.endsWith(l))o=a.length-t.value.afterTxt.length;else if(a.startsWith(n))o=n.length;else{const e=n[r-1],t=a.indexOf(e,r-1);-1!==t&&(o=t+1)}e.value.setSelectionRange(o,o)}catch(n){c(!1,`Something warning of cursor restore. Please fire issue about this: ${n.message}`)}}]}(i,b),P=e=>k.value&&!e.lessEquals(k.value)?k.value:L.value&&!L.value.lessEquals(e)?L.value:null,D=e=>!P(e),R=(a,t)=>{var n;let l=a,r=D(l)||l.isEmpty();if(l.isEmpty()||t||(l=P(l)||l,r=!0),!e.readonly&&!e.disabled&&r){const a=l.toString(),r=N(a,t);return r>=0&&(l=Fe(ze(a,".",r))),l.equals(S.value)||(o=l,void 0===e.value&&(S.value=o),null===(n=e.onChange)||void 0===n||n.call(e,l.isEmpty()?null:Ue(e.stringMode,l)),void 0===e.value&&C(l,t)),l}var o;return S.value},B=(()=>{const e=m(0),a=()=>{v.cancel(e.value)};return s((()=>{a()})),t=>{a(),e.value=v((()=>{t()}))}})(),j=a=>{var t;if(O(),I.value=a,!y.value){const e=Fe(w(a));e.isNaN()||R(e,!0)}null===(t=e.onInput)||void 0===t||t.call(e,a),B((()=>{let t=a;e.parser||(t=a.replace(/。/g,".")),t!==a&&j(t)}))},F=()=>{y.value=!0},z=()=>{y.value=!1,j(i.value.value)},K=e=>{j(e.target.value)},U=a=>{var t,n;if(a&&M.value||!a&&T.value)return;x.value=!1;let l=Fe(e.step);a||(l=l.negate());const r=(S.value||Fe(0)).add(l.toString()),o=R(r,!1);null===(t=e.onStep)||void 0===t||t.call(e,Ue(e.stringMode,o),{offset:e.step,type:a?"up":"down"}),null===(n=i.value)||void 0===n||n.focus()},q=a=>{const t=Fe(w(I.value));let n=t;n=t.isNaN()?S.value:R(t,a),void 0!==e.value?C(S.value,!1):n.isNaN()||C(n,!1)},H=()=>{x.value=!0},W=a=>{var t;const{which:n}=a;x.value=!0,n===$.ENTER&&(y.value||(x.value=!1),q(!1),null===(t=e.onPressEnter)||void 0===t||t.call(e,a)),!1!==e.keyboard&&!y.value&&[$.UP,$.DOWN].includes(n)&&(U($.UP===n),a.preventDefault())},G=()=>{x.value=!1},V=e=>{q(!1),b.value=!1,x.value=!1,r("blur",e)};return h((()=>e.precision),(()=>{S.value.isInvalidate()||C(S.value,!1)}),{flush:"post"}),h((()=>e.value),(()=>{const a=Fe(e.value);S.value=a;const t=Fe(w(I.value));a.equals(t)&&x.value&&!e.formatter||C(a,x.value)}),{flush:"post"}),h(I,(()=>{e.formatter&&A()}),{flush:"post"}),h((()=>e.disabled),(e=>{e&&(b.value=!1)})),o({focus:()=>{var e;null===(e=i.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=i.value)||void 0===e||e.blur()}}),()=>{const a=f(f({},t),e),{prefixCls:o="rc-input-number",min:u,max:s,step:c=1,defaultValue:m,value:v,disabled:g,readonly:h,keyboard:x,controls:y=!0,autofocus:$,stringMode:N,parser:w,formatter:_,precision:E,decimalSeparator:C,onChange:k,onInput:L,onPressEnter:O,onStep:A,lazy:P,class:R,style:B}=a,j=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)a.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(t[n[l]]=e[n[l]])}return t}(a,["prefixCls","min","max","step","defaultValue","value","disabled","readonly","keyboard","controls","autofocus","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","lazy","class","style"]),{upHandler:q,downHandler:X}=n,Q=`${o}-input`,J={};return P?J.onChange=K:J.onInput=K,l("div",{class:d(o,R,{[`${o}-focused`]:b.value,[`${o}-disabled`]:g,[`${o}-readonly`]:h,[`${o}-not-a-number`]:S.value.isNaN(),[`${o}-out-of-range`]:!S.value.isInvalidate()&&!D(S.value)}),style:B,onKeydown:W,onKeyup:G},[y&&l(Ke,{prefixCls:o,upDisabled:M.value,downDisabled:T.value,onStep:U},{upNode:q,downNode:X}),l("div",{class:`${Q}-wrap`},[l("input",p(p(p({autofocus:$,autocomplete:"off",role:"spinbutton","aria-valuemin":u,"aria-valuemax":s,"aria-valuenow":S.value.isInvalidate()?null:S.value.toString(),step:c},j),{},{ref:i,class:Q,value:I.value,disabled:g,readonly:h,onFocus:e=>{b.value=!0,r("focus",e)}},J),{},{onBlur:V,onCompositionstart:F,onCompositionend:z,onBeforeinput:H}),null)])])}}});function Ge(e){return null!=e}const Ve=e=>{const{componentCls:a,lineWidth:t,lineType:n,colorBorder:l,borderRadius:r,fontSizeLG:o,controlHeightLG:i,controlHeightSM:u,colorError:s,inputPaddingHorizontalSM:d,colorTextDescription:p,motionDurationMid:c,colorPrimary:m,controlHeight:v,inputPaddingHorizontal:g,colorBgContainer:h,colorTextDisabled:b,borderRadiusSM:x,borderRadiusLG:y,controlWidth:$,handleVisible:S}=e;return[{[a]:f(f(f(f({},I(e)),_(e)),E(e,a)),{display:"inline-block",width:$,margin:0,padding:0,border:`${t}px ${n} ${l}`,borderRadius:r,"&-rtl":{direction:"rtl",[`${a}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:o,borderRadius:y,[`input${a}-input`]:{height:i-2*t}},"&-sm":{padding:0,borderRadius:x,[`input${a}-input`]:{height:u-2*t,padding:`0 ${d}px`}},"&:hover":f({},T(e)),"&-focused":f({},M(e)),"&-disabled":f(f({},L(e)),{[`${a}-input`]:{cursor:"not-allowed"}}),"&-out-of-range":{input:{color:s}},"&-group":f(f(f({},I(e)),k(e)),{"&-wrapper":{display:"inline-block",textAlign:"start",verticalAlign:"top",[`${a}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${a}-group-addon`]:{borderRadius:y}},"&-sm":{[`${a}-group-addon`]:{borderRadius:x}}}}),[a]:{"&-input":f(f({width:"100%",height:v-2*t,padding:`0 ${g}px`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:r,outline:0,transition:`all ${c} linear`,appearance:"textfield",color:e.colorText,fontSize:"inherit",verticalAlign:"top"},C(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})}})},{[a]:{[`&:hover ${a}-handler-wrap, &-focused ${a}-handler-wrap`]:{opacity:1},[`${a}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:e.handleWidth,height:"100%",background:h,borderStartStartRadius:0,borderStartEndRadius:r,borderEndEndRadius:r,borderEndStartRadius:0,opacity:!0===S?1:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`opacity ${c} linear ${c}`,[`${a}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`\n              ${a}-handler-up-inner,\n              ${a}-handler-down-inner\n            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${a}-handler`]:{height:"50%",overflow:"hidden",color:p,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${t}px ${n} ${l}`,transition:`all ${c} linear`,"&:active":{background:e.colorFillAlter},"&:hover":{height:"60%",[`\n              ${a}-handler-up-inner,\n              ${a}-handler-down-inner\n            `]:{color:m}},"&-up-inner, &-down-inner":f(f({},O()),{color:p,transition:`all ${c} linear`,userSelect:"none"})},[`${a}-handler-up`]:{borderStartEndRadius:r},[`${a}-handler-down`]:{borderBlockStart:`${t}px ${n} ${l}`,borderEndEndRadius:r},"&-disabled, &-readonly":{[`${a}-handler-wrap`]:{display:"none"},[`${a}-input`]:{color:"inherit"}},[`\n          ${a}-handler-up-disabled,\n          ${a}-handler-down-disabled\n        `]:{cursor:"not-allowed"},[`\n          ${a}-handler-up-disabled:hover &-handler-up-inner,\n          ${a}-handler-down-disabled:hover &-handler-down-inner\n        `]:{color:b}}},{[`${a}-borderless`]:{borderColor:"transparent",boxShadow:"none",[`${a}-handler-down`]:{borderBlockStartWidth:0}}}]},Xe=e=>{const{componentCls:a,inputPaddingHorizontal:t,inputAffixPadding:n,controlWidth:l,borderRadiusLG:r,borderRadiusSM:o}=e;return{[`${a}-affix-wrapper`]:f(f(f({},_(e)),E(e,`${a}-affix-wrapper`)),{position:"relative",display:"inline-flex",width:l,padding:0,paddingInlineStart:t,"&-lg":{borderRadius:r},"&-sm":{borderRadius:o},[`&:not(${a}-affix-wrapper-disabled):hover`]:f(f({},T(e)),{zIndex:1}),"&-focused, &:focus":{zIndex:1},"&-disabled":{[`${a}[disabled]`]:{background:"transparent"}},[`> div${a}`]:{width:"100%",border:"none",outline:"none",[`&${a}-focused`]:{boxShadow:"none !important"}},[`input${a}-input`]:{padding:0},"&::before":{width:0,visibility:"hidden",content:'"\\a0"'},[`${a}-handler-wrap`]:{zIndex:2},[a]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:n},"&-suffix":{position:"absolute",insetBlockStart:0,insetInlineEnd:0,zIndex:1,height:"100%",marginInlineEnd:t,marginInlineStart:n}}})}},Qe=S("InputNumber",(e=>{const a=N(e);return[Ve(a),Xe(a),w(a)]}),(e=>({controlWidth:90,handleWidth:e.controlHeightSM-2*e.lineWidth,handleFontSize:e.fontSize/2,handleVisible:"auto"})));const Je=He(),Ye=o({compatConfig:{MODE:3},name:"AInputNumber",inheritAttrs:!1,props:f(f({},Je),{size:y(),bordered:b(!0),placeholder:String,name:String,id:String,type:String,addonBefore:q.any,addonAfter:q.any,prefix:q.any,"onUpdate:value":Je.onChange,valueModifiers:Object,status:y()}),slots:Object,setup(e,a){let{emit:t,expose:n,attrs:r,slots:o}=a;var i;const u=A(),s=P.useInject(),c=g((()=>H(s.status,e.status))),{prefixCls:v,size:b,direction:x,disabled:y}=D("input-number",e),{compactSize:$,compactItemClassnames:S}=R(v,x),N=B(),w=g((()=>{var e;return null!==(e=y.value)&&void 0!==e?e:N.value})),[I,_]=Qe(v),E=g((()=>$.value||b.value)),C=m(null!==(i=e.value)&&void 0!==i?i:e.defaultValue),k=m(!1);h((()=>e.value),(()=>{C.value=e.value}));const L=m(null),M=()=>{var e;null===(e=L.value)||void 0===e||e.focus()};n({focus:M,blur:()=>{var e;null===(e=L.value)||void 0===e||e.blur()}});const T=a=>{void 0===e.value&&(C.value=a),t("update:value",a),t("change",a),u.onFieldChange()},O=e=>{k.value=!1,t("blur",e),u.onFieldBlur()},q=e=>{k.value=!0,t("focus",e)};return()=>{var a,t,n,i;const{hasFeedback:m,isFormItemInput:g,feedbackIcon:h}=s,b=null!==(a=e.id)&&void 0!==a?a:u.id.value,y=f(f(f({},r),e),{id:b,disabled:w.value}),{class:$,bordered:N,readonly:A,style:P,addonBefore:D=(null===(t=o.addonBefore)||void 0===t?void 0:t.call(o)),addonAfter:R=(null===(n=o.addonAfter)||void 0===n?void 0:n.call(o)),prefix:B=(null===(i=o.prefix)||void 0===i?void 0:i.call(o)),valueModifiers:H={}}=y,W=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)a.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(t[n[l]]=e[n[l]])}return t}(y,["class","bordered","readonly","style","addonBefore","addonAfter","prefix","valueModifiers"]),G=v.value,V=d({[`${G}-lg`]:"large"===E.value,[`${G}-sm`]:"small"===E.value,[`${G}-rtl`]:"rtl"===x.value,[`${G}-readonly`]:A,[`${G}-borderless`]:!N,[`${G}-in-form-item`]:g},j(G,c.value),$,S.value,_.value);let X=l(We,p(p({},F(W,["size","defaultValue"])),{},{ref:L,lazy:!!H.lazy,value:C.value,class:V,prefixCls:G,readonly:A,onChange:T,onBlur:O,onFocus:q}),{upHandler:o.upIcon?()=>l("span",{class:`${G}-handler-up-inner`},[o.upIcon()]):()=>l(Le,{class:`${G}-handler-up-inner`},null),downHandler:o.downIcon?()=>l("span",{class:`${G}-handler-down-inner`},[o.downIcon()]):()=>l($e,{class:`${G}-handler-down-inner`},null)});const Q=Ge(D)||Ge(R),J=Ge(B);if(J||m){const e=d(`${G}-affix-wrapper`,j(`${G}-affix-wrapper`,c.value,m),{[`${G}-affix-wrapper-focused`]:k.value,[`${G}-affix-wrapper-disabled`]:w.value,[`${G}-affix-wrapper-sm`]:"small"===E.value,[`${G}-affix-wrapper-lg`]:"large"===E.value,[`${G}-affix-wrapper-rtl`]:"rtl"===x.value,[`${G}-affix-wrapper-readonly`]:A,[`${G}-affix-wrapper-borderless`]:!N,[`${$}`]:!Q&&$},_.value);X=l("div",{class:e,style:P,onClick:M},[J&&l("span",{class:`${G}-prefix`},[B]),X,m&&l("span",{class:`${G}-suffix`},[h])])}if(Q){const e=`${G}-group`,a=`${e}-addon`,t=D?l("div",{class:a},[D]):null,n=R?l("div",{class:a},[R]):null,r=d(`${G}-wrapper`,e,{[`${e}-rtl`]:"rtl"===x.value},_.value),o=d(`${G}-group-wrapper`,{[`${G}-group-wrapper-sm`]:"small"===E.value,[`${G}-group-wrapper-lg`]:"large"===E.value,[`${G}-group-wrapper-rtl`]:"rtl"===x.value},j(`${v}-group-wrapper`,c.value,m),$,_.value);X=l("div",{class:o,style:P},[l("div",{class:r},[t&&l(z,null,{default:()=>[l(K,null,{default:()=>[t]})]}),X,n&&l(z,null,{default:()=>[l(K,null,{default:()=>[n]})]})])])}return I(U(X,{style:P}))}}}),Ze=f(Ye,{install:e=>(e.component(Ye.name,Ye),e)}),ea=e=>(me("data-v-b1a400d9"),e=e(),ve(),e),aa={class:"form-item-inline"},ta={key:0,class:"content-length-ollama-tip"},na=ea((()=>ee("a",{href:"https://github.com/netease-youdao/QAnything/blob/qanything-v2/FAQ_zh.md",target:"_blank",style:{color:"#3c87ff"}}," [手动修改ollama模型配置] ",-1))),la=ea((()=>ee("span",{style:{color:"#888",background:"rgba(150, 150, 150, 0.1)"}}," 总Token数量选择 ",-1))),ra={class:"form-item-inline"},oa={class:"form-item-inline"},ia={class:"form-item-inline"},ua={class:"form-item-inline"},sa=fe(o({__name:"ChatSettingForm",setup(a,{expose:r}){r({onCheck:async function(){try{return await c.value.validateFields(),v.value}catch(e){return e}}});const i=n().common,{chatSettingConfigured:s}=W(t()),{setChatSettingConfigured:d,openAISettingMap:p}=t(),c=u(null),m=u([]),v=u(),f=o({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}});let g=0;const b=u([]),x=u(),y=u(),$=u(200),S=e=>{e.preventDefault(),b.value.push(y.value||`New item ${g+=1}`),y.value="",setTimeout((()=>{var e;null==(e=x.value)||e.focus()}),0)};G((()=>{b.value=[...p.keys()]}));const N=e=>{var a;const t=null==(a=p.get(e))?void 0:a.apiContextLength;t?(I.value=t/1024,$.value=t/1024):I.value=4},w=e=>e>=11?"无限制":e,I=u(4);h((()=>{var e;return null==(e=null==v?void 0:v.value)?void 0:e.apiContextLength}),(()=>{var e;I.value=(null==(e=null==v?void 0:v.value)?void 0:e.apiContextLength)/1024})),h((()=>I.value),(()=>{v.value.apiContextLength=1024*I.value}));const _={modelType:[{required:!0,message:`${i.plsInput}${i.modelProviderLabel}`,trigger:"change"}],modelName:[{required:!0,message:`${i.plsInput}${i.modelNameLabel}`,trigger:"change"}],apiKey:[{required:!0,message:`${i.plsInput}${i.apiKeyLabel}`,trigger:"change"}],apiBase:[{required:!0,message:`${i.plsInput}${i.apiBaseLabel}`,trigger:"change"}],apiModelName:[{required:!0,message:`${i.plsInput}${i.apiModelNameLabel}`,trigger:"change"}],apiContextLength:[{required:!0,message:`${i.plsInput}${i.apiContextLengthLabel}`,trigger:"change"}],maxToken:[{required:!0,message:`${i.plsInput}${i.maxTokenLabel}`,trigger:"change"}],chunkSize:[{required:!0,message:`${i.plsInput}${i.chunkSizeLabel}`,trigger:"change"}],temperature:[{required:!0,message:`${i.plsInput}temperature`,trigger:"change"}],top_P:[{required:!0,message:`${i.plsInput}top_P`,trigger:"change"}],top_K:[{required:!0,message:`${i.plsInput}top_K`,trigger:"change"}]};function E(){d(v.value),de.success("添加成功")}const C=e=>{$.value=200,"openAI"===e?v.value={...s.value.find((e=>"openAI"===e.modelType))}:"ollama"===e?(v.value={...s.value.find((e=>"ollama"===e.modelType))},pe((()=>{v.value.apiContextLength=2048}))):v.value={...s.value.find((a=>a.customId===e))}};function k(e){if(0===e){m.value=[];const e=v.value.capabilities;for(let a in e)e[a]&&m.value.push(a)}else{for(let e in v.value.capabilities)v.value.capabilities[e]=!1;m.value.forEach((e=>{v.value.capabilities[e]=!0}))}}return h((()=>m.value),(()=>k(1))),h((()=>v.value),(()=>{k(0)})),V((()=>{(()=>{const e={...s.value.find((e=>!0===e.active))};if("openAI"===e.modelType&&p.has(e.apiModelName)){N(e.apiModelName);const{apiContextLength:a}=p.get(e.apiModelName);e.apiContextLength!==a&&(I.value=e.apiContextLength/1024)}v.value={...e}})()})),(a,t)=>{const n=Ne,r=Se,o=xe,u=re,d=oe,p=we,m=ue,g=Ie,h=_e,k=e,L=Ze,M=be,T=Q;return ce(),X(T,null,{default:J((()=>[l(M,{ref_key:"formRef",ref:c,model:Y(v),rules:_,"label-col":{style:{width:"150px"}},"wrapper-col":{span:24},style:{width:"100%"},"label-align":"left",onFinish:E},{default:J((()=>[l(o,{label:Y(i).modelProviderLabel,name:"modelType"},{default:J((()=>[l(r,{value:Y(v).modelType,"onUpdate:value":t[0]||(t[0]=e=>Y(v).modelType=e),placeholder:Y(i).selectModel,onSelect:C},{default:J((()=>[l(n,{value:"openAI"},{default:J((()=>[te("openAI")])),_:1}),l(n,{value:"ollama"},{default:J((()=>[te("ollama")])),_:1}),(ce(!0),ae(ne,null,le(Y(s).filter((e=>"openAI"!==e.modelType&&"ollama"!==e.modelType)),(e=>(ce(),X(n,{key:e.customId,value:e.customId},{default:J((()=>[te(se(0===e.modelName.length?Y(i).customModelType:e.modelName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),"自定义模型配置"===Y(v).modelType?(ce(),X(o,{key:0,ref:"modelName",label:Y(i).modelNameLabel,name:"modelName"},{default:J((()=>[l(u,{value:Y(v).modelName,"onUpdate:value":t[1]||(t[1]=e=>Y(v).modelName=e),"aria-autocomplete":"none"},null,8,["value"])])),_:1},8,["label"])):Z("",!0),"ollama"!==Y(v).modelType?(ce(),X(o,{key:1,ref:"apiKey",label:Y(i).apiKeyLabel,name:"apiKey"},{default:J((()=>[l(d,{value:Y(v).apiKey,"onUpdate:value":t[2]||(t[2]=e=>Y(v).apiKey=e),placeholder:"sk-xxxxxxxxxxxxxxxxxxxxxxxx"},null,8,["value"])])),_:1},8,["label"])):Z("",!0),l(o,{ref:"apiBase",label:Y(i).apiBaseLabel,name:"apiBase"},{default:J((()=>[l(u,{value:Y(v).apiBase,"onUpdate:value":t[3]||(t[3]=e=>Y(v).apiBase=e),"aria-autocomplete":"none"},null,8,["value"])])),_:1},8,["label"]),l(o,{ref:"apiModelName",label:Y(i).apiModelNameLabel,name:"apiModelName"},{default:J((()=>["openAI"!==Y(v).modelType?(ce(),X(u,{key:0,value:Y(v).apiModelName,"onUpdate:value":t[4]||(t[4]=e=>Y(v).apiModelName=e),"aria-autocomplete":"none"},null,8,["value"])):(ce(),X(r,{key:1,value:Y(v).apiModelName,"onUpdate:value":t[6]||(t[6]=e=>Y(v).apiModelName=e),options:Y(b).map((e=>({value:e}))),onChange:N},{dropdownRender:J((({menuNode:e})=>[l(Y(f),{vnodes:e},null,8,["vnodes"]),l(p,{style:{margin:"4px 0"}}),l(g,{style:{padding:"4px 8px"}},{default:J((()=>[l(u,{ref_key:"inputRef",ref:x,value:Y(y),"onUpdate:value":t[5]||(t[5]=e=>ie(y)?y.value=e:null),placeholder:"输入模型名称"},null,8,["value"]),l(m,{type:"text",onClick:S},{default:J((()=>[te("添加模型")])),_:1})])),_:1})])),_:1},8,["value","options"]))])),_:1},8,["label"]),ee("div",aa,[l(o,{ref:"apiContextLength",name:"apiContextLength"},{label:J((()=>[l(h,{placement:"topLeft"},{content:J((()=>[ee("p",null,se(Y(i).apiContextLengthLabelDescription),1)])),default:J((()=>[ee("span",null,se(Y(i).apiContextLengthLabel),1)])),_:1})])),default:J((()=>[l(k,{value:Y(I),"onUpdate:value":t[7]||(t[7]=e=>ie(I)?I.value=e:null),min:"ollama"===Y(v).modelType?2:4,max:Y($)||200,step:1,"tip-formatter":e=>`${e}K`},null,8,["value","min","max","tip-formatter"]),"ollama"===Y(v).modelType?(ce(),ae("div",ta,[te(" 您需要先 "),na,te(" 然后返回前端进行 "),la])):Z("",!0)])),_:1},512),l(o,{name:"apiContextLength"},{default:J((()=>[l(L,{value:Y(I),"onUpdate:value":t[8]||(t[8]=e=>ie(I)?I.value=e:null),min:"ollama"===Y(v).modelType?2:4,max:Y($)||200,step:1,precision:0,controls:!1,"addon-after":"K"},null,8,["value","min","max"])])),_:1})]),ee("div",ra,[l(o,{ref:"maxToken",name:"maxToken"},{label:J((()=>[l(h,{placement:"topLeft"},{content:J((()=>[ee("p",null,se(Y(i).maxTokenLabelDescription),1)])),default:J((()=>[ee("span",null,se(Y(i).maxTokenLabel),1)])),_:1})])),default:J((()=>[l(k,{value:Y(v).maxToken,"onUpdate:value":t[9]||(t[9]=e=>Y(v).maxToken=e),min:1,max:Y(v).apiContextLength/4,step:1},null,8,["value","max"])])),_:1},512),l(o,{name:"maxToken"},{default:J((()=>[l(L,{value:Y(v).maxToken,"onUpdate:value":t[10]||(t[10]=e=>Y(v).maxToken=e),min:1,max:Y(v).apiContextLength/4,step:1,precision:0,controls:!1},null,8,["value","max"])])),_:1})]),ee("div",oa,[l(o,{ref:"temperature",name:"temperature"},{label:J((()=>[l(h,{placement:"topLeft"},{content:J((()=>[ee("p",null,se(Y(i).temperatureLabelDescription),1)])),default:J((()=>[ee("span",null,se(Y(i).temperatureLabel),1)])),_:1})])),default:J((()=>[l(k,{value:Y(v).temperature,"onUpdate:value":t[11]||(t[11]=e=>Y(v).temperature=e),min:0,max:1,step:.01},null,8,["value"])])),_:1},512),l(o,{name:"temperature"},{default:J((()=>[l(L,{value:Y(v).temperature,"onUpdate:value":t[12]||(t[12]=e=>Y(v).temperature=e),min:0,max:1,step:.01,precision:2,controls:!1},null,8,["value"])])),_:1})]),ee("div",ia,[l(o,{ref:"top_P",name:"top_P"},{label:J((()=>[l(h,{placement:"topLeft"},{content:J((()=>[ee("p",null,se(Y(i).top_PLabelDescription),1)])),default:J((()=>[ee("span",null,se(Y(i).top_PLabel),1)])),_:1})])),default:J((()=>[l(k,{value:Y(v).top_P,"onUpdate:value":t[13]||(t[13]=e=>Y(v).top_P=e),min:0,max:1,step:.01},null,8,["value"])])),_:1},512),l(o,{name:"top_P"},{default:J((()=>[l(L,{value:Y(v).top_P,"onUpdate:value":t[14]||(t[14]=e=>Y(v).top_P=e),min:0,max:1,step:.01,precision:2,controls:!1},null,8,["value"])])),_:1})]),ee("div",ua,[l(o,{ref:"top_K",name:"top_K"},{label:J((()=>[l(h,{placement:"topLeft"},{content:J((()=>[ee("p",null,se(Y(i).top_KLabelDescription),1)])),default:J((()=>[ee("span",null,se(Y(i).top_KLabel),1)])),_:1})])),default:J((()=>[l(k,{value:Y(v).top_K,"onUpdate:value":t[15]||(t[15]=e=>Y(v).top_K=e),min:1,max:100,step:1},null,8,["value"])])),_:1},512),l(o,{name:"top_K"},{default:J((()=>[l(L,{value:Y(v).top_K,"onUpdate:value":t[16]||(t[16]=e=>Y(v).top_K=e),min:1,max:100,step:1,precision:0,controls:!1},null,8,["value"])])),_:1})]),l(o,{ref:"context",name:"context"},{label:J((()=>[l(h,{placement:"topLeft"},{content:J((()=>[ee("p",null,se(Y(i).contextLabelDescription),1)])),default:J((()=>[ee("span",null,se(Y(i).contextLabel),1)])),_:1})])),default:J((()=>[l(k,{value:Y(v).context,"onUpdate:value":t[17]||(t[17]=e=>Y(v).context=e),min:0,max:11,step:1,"tip-formatter":w},null,8,["value"])])),_:1},512),"自定义模型配置"===Y(v).modelType?(ce(),X(o,{key:2,"wrapper-col":{span:24}},{default:J((()=>[l(m,{type:"primary","html-type":"submit",style:{"margin-left":"0 !important",width:"auto"}},{default:J((()=>[te(se(Y(i).saveModel),1)])),_:1})])),_:1})):Z("",!0)])),_:1},8,["model"])])),_:1})}}}),[["__scopeId","data-v-b1a400d9"]]),da={class:"model-set-dialog-comp"},pa={class:"select-model"},ca={class:"footer"},ma=fe(o({__name:"ChatSettingDialog",setup(e,{expose:r}){const{showSettingModal:o}=W(a()),{setChatSettingConfigured:i}=t(),s=u(),{common:d}=n(),p=()=>{o.value=!1},c=async e=>{const a=await s.value.onCheck();return!Object.hasOwn(a,"errorFields")&&(e&&e(a),!0)},m=e=>{o.value=!1,i(e),de.success("应用成功")},v=()=>{c(m)};return r({handleOk:c}),(e,a)=>{const t=ue,n=he;return ce(),X(ge,{to:"body"},[l(n,{open:Y(o),"onUpdate:open":a[0]||(a[0]=e=>ie(o)?o.value=e:null),title:Y(d).modelSettingTitle,centered:"",width:"700px","wrap-class-name":"model-set-modal",footer:null,"force-render":!0},{default:J((()=>[ee("div",da,[ee("div",pa,[l(sa,{ref_key:"chatSettingFormRef",ref:s},null,512)]),ee("div",ca,[l(t,{onClick:p},{default:J((()=>[te(se(Y(d).cancel),1)])),_:1}),l(t,{type:"primary",style:{width:"auto","margin-left":"10px"},onClick:v},{default:J((()=>[te(se(Y(d).confirmApplication),1)])),_:1})])])])),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-7aec2361"]]);export{ma as C,sa as a};
