var e=Object.defineProperty,t=(t,s,i)=>((t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i)(t,"symbol"!=typeof s?s+"":s,i);import{u as s}from"./index-Dnd1wrVz.js";const i=(e,t)=>{let s,i=0;return function(...n){const r=Date.now();r-i>=t?(clearTimeout(s),i=r,e.apply(this,n)):(clearTimeout(s),s=window.setTimeout((()=>{e.apply(this,n)}),t))}},n=e=>{let t="";switch(e.status){case"loading":t="上传中";break;case"red":t=e.errorText?e.errorText:"解析失败";break;case"gray":t="上传成功待解析";break;case"green":t="解析成功";break;case"yellow":t="解析失败"}return t},r=async e=>new Promise(((t,i)=>{var n;if("blob"===(null==(n=null==e?void 0:e.request)?void 0:n.responseType)&&t(e),"0"===e.errorCode||200===e.code)t(e.result||e.data||e);else if("111"===e.errorCode){const{setUserInfo:e}=s();e({token:""})}else i(e)})),o=e=>e<0?"未知":e<1024?e+"B":e<1048576?(e/1024).toFixed(2)+"KB":e<1073741824?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"G",a=(e,t="-",s=":")=>{if(!e)return"";const i=e.slice(0,8),n=e.slice(8),r=i.slice(0,4),o=i.slice(4,6),a=i.slice(6,8);let l,c;n&&(l=n.slice(0,2),c=n.slice(2,4));let d=`${r}${t}${o}${t}${a}`;return n&&(d+=` ${l}${s}${c}`),d},l=(e=14)=>{const t=new Date,s=t.toISOString().split("T")[0],i=new Date(t.getTime());i.setDate(t.getDate()-e-1);return{time_start:i.toISOString().split("T")[0],time_end:s}},c=e=>{const t=e.split(".");return{fileName:t.slice(0,-1).join("."),fileExtension:t.at(-1)}};class d{constructor(){t(this,"timeObj"),t(this,"tokenObj"),t(this,"settingObj"),t(this,"date"),this.timeObj={preprocess:0,condense_q_chain:0,retriever_search:0,web_search:0,rerank:0,reprocess:0,llm_first_return:0,first_return:0,llm_completed:0,chat_completed:0}}addTime(e){this.timeObj={...this.timeObj,...e}}addToken(e){this.tokenObj=e}addChatSetting(e){this.settingObj=e}addDate(e){this.date=e}getChatInfo(){return{timeInfo:this.timeObj,tokenInfo:this.tokenObj,settingInfo:this.settingObj,dateInfo:this.date}}}function u(e){const t=new Date(e);return`${t.getFullYear()}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`}function m(e,t="",s){let i=document.createElement("a");i.download=t,i.style.display="none",i.href=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function p(e){var t;return decodeURIComponent(((null==(t=e["content-disposition"])?void 0:t.split("filename="))||[])[1].slice(1,-1)||"")}export{d as C,o as a,a as b,l as c,m as d,p as e,u as f,n as g,c as p,r,i as t};
